<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Sparkplug - Ruby Rack module for generating sparkline graphs on the fly</title>
    <style type="text/css" media="screen">
h1, div, p {
  font-family: verdana;
}
    </style>
  </head>
  <body>
    <h1>Sparkplug Redis Demo<% if @plug %>: <%=h @plug.name %><% end %></h1>
    <% if @plug %>
    <div>
      <img src="/sparks/<%= @plug.name %>.png" />
    </div>
    <p>(if you can see this, the rack module works!)</p>
    <% end %>

    <p><strong>Existing:</strong> <%= @plug_list.all.map { |name| %(<a href="/#{h(name)}">#{h(name)}</a>) }.join(", ") %></p>
    <% if @plug %>
    <p><a href="/">Back</a></p>
    <% end %>
    <form action="/modify" method="post">
      <div>
        <label>Name: <input type="text" name="plug" value="<%= @plug.name if @plug %>" /></label><br />
        <label>Value: <input type="text" name="value" value="" size="5" /></label><br />
        <input type="submit" name="commit" value="Save">
        <% if @plug %>
        <input type="submit" name="commit" value="Delete">
        <% end %>
      </div>
    </form>
  </body>
</html>